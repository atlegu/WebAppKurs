-- Fix 4.2 Obligasjonsstruktur og n√∏kkeltall with proper content
UPDATE sub_modules 
SET content = jsonb_build_object(
    'sections', jsonb_build_array(
        jsonb_build_object(
            'title', 'üìã Obligasjonsstruktur og n√∏kkeltall',
            'type', 'content',
            'content', 'N√•r du kj√∏per en obligasjon, er det noen faste komponenter du m√• kjenne til som bestemmer hvordan avkastning og risiko ser ut.

**Hovedkomponenter i en obligasjon:**

**1. P√•lydende verdi (Face Value/Par Value)**
‚Ä¢ Det bel√∏pet som betales tilbake ved forfall
‚Ä¢ Vanligvis 1 000 kr, 10 000 kr eller 100 000 kr
‚Ä¢ Grunnlaget for kupongberegninger

**2. Kupongrente**
‚Ä¢ Den √•rlige renten som betales p√• p√•lydende verdi
‚Ä¢ Eksempel: 4% kupong p√• 1 000 kr = 40 kr per √•r
‚Ä¢ Kan v√¶re fast eller flytende

**3. L√∏petid (Maturity)**
‚Ä¢ N√•r obligasjonen forfaller og p√•lydende betales tilbake
‚Ä¢ Kan v√¶re fra m√•neder til 50+ √•r
‚Ä¢ P√•virker obligasjonens risiko og volatilitet

**4. Kupongfrekvens**
‚Ä¢ Hvor ofte kuponger betales ut
‚Ä¢ Vanlig: √Örlig, halv√•rlig eller kvartalsvis
‚Ä¢ P√•virker reinvesteringsrisiko

**5. Utstedelseskurs**
‚Ä¢ Prisen obligasjonen f√∏rst selges for
‚Ä¢ Kan v√¶re til pari (100%), over pari eller under pari

**N√∏kkeltall du m√• forst√•:**
‚Ä¢ **Aktuell yield** = √Örlig kupong √∑ Markedspris
‚Ä¢ **Yield to Maturity (YTM)** = Total √•rlig avkastning til forfall
‚Ä¢ **Kredittvurdering** = Risikovurdering (AAA til D)
‚Ä¢ **Durasjon** = F√∏lsomhet for renteendringer',
            'video', 'Video (5 min): "Obligasjonsstruktur - byggeklossene"',
            'exercise', 'Identifiser komponentene i 3 ulike obligasjoner'
        )
    )
)
WHERE title = '4.2 Obligasjonsstruktur og n√∏kkeltall';

-- Fix 4.3 Pris og avkastning med proper content
UPDATE sub_modules 
SET content = jsonb_build_object(
    'sections', jsonb_build_array(
        jsonb_build_object(
            'title', 'üí∞ Pris og avkastning p√• obligasjoner',
            'type', 'content',
            'content', 'Obligasjoner utstedes vanligvis til en p√•lydende verdi, men p√• annenh√•ndsmarkedet kan de omsettes til priser over eller under pari.

**Tre prisscenarier:**

**1. Pris = P√•lydende (100% eller "pari")**
‚Ä¢ Obligasjonens kupongrente = Markedsrenten
‚Ä¢ Eksempel: 4% kupong n√•r markedsrenten er 4%
‚Ä¢ Ingen gevinst/tap ved forfall

**2. Pris < P√•lydende (Under pari/med rabatt)**
‚Ä¢ Markedsrenten > Kupongrenten
‚Ä¢ Eksempel: 3% kupong n√•r markedsrenten er 5%
‚Ä¢ Investor f√•r kapitalgevinst ved forfall + kupongbetalinger

**3. Pris > P√•lydende (Over pari/med premie)**
‚Ä¢ Markedsrenten < Kupongrenten  
‚Ä¢ Eksempel: 6% kupong n√•r markedsrenten er 4%
‚Ä¢ Investor betaler ekstra for h√∏yere kupong

**Faktorer som p√•virker obligasjonspriser:**

**Renter** üìà
‚Ä¢ Viktigste faktor: Inverse forhold til obligasjonspriser
‚Ä¢ Renter opp ‚Üí Obligasjonspriser ned
‚Ä¢ Renter ned ‚Üí Obligasjonspriser opp

**Kredittrisiko** ‚ö†Ô∏è
‚Ä¢ H√∏yere risiko ‚Üí Lavere pris (h√∏yere yield)
‚Ä¢ Kredittvurdering p√•virker direkte prissetting

**Tid til forfall** ‚è∞
‚Ä¢ Lengre l√∏petid ‚Üí Mer prisf√∏lsomhet for renteendringer
‚Ä¢ "Pull to par" - prisene trekker mot p√•lydende ved n√¶rmere forfall

**Likviditet** üíß
‚Ä¢ Likvide obligasjoner handles til bedre priser
‚Ä¢ Sm√• utstedelser kan ha store kj√∏p/salg-spreader

**Praktisk eksempel:**
Obligasjon: 1 000 kr p√•lydende, 5% kupong, 3 √•r l√∏petid
‚Ä¢ Markedsrente 5%: Pris ‚âà 1 000 kr
‚Ä¢ Markedsrente 6%: Pris ‚âà 973 kr  
‚Ä¢ Markedsrente 4%: Pris ‚âà 1 028 kr',
            'video', 'Video (6 min): "Hvorfor endres obligasjonspriser?"',
            'exercise', 'Beregn prisen p√• en obligasjon gitt ulike markedsrenter'
        )
    )
)
WHERE title = '4.3 Pris og avkastning p√• obligasjoner';

-- Add missing oppgaver section for obligasjoner (modul 4)
INSERT INTO sub_modules (module_id, title, order_index, content)
SELECT 
    m.id,
    'Oppgaver',
    9,
    jsonb_build_object(
        'sections', jsonb_build_array(
            jsonb_build_object(
                'title', 'üéØ Oppgaver og selvtest - Obligasjoner',
                'type', 'content',
                'content', 'Test og utvid kunnskapen din om obligasjoner gjennom v√•re interaktive √∏velser.

**Tilgjengelige oppgaver:**

**üìù Flervalgsoppgaver**
15 tilfeldige sp√∏rsm√•l som dekker alle omr√•der fra obligasjonsmodulen:
‚Ä¢ Grunnleggende obligasjonsbegreper
‚Ä¢ Pris- og avkastningsberegninger  
‚Ä¢ Effektiv rente (YTM)
‚Ä¢ Renterisiko og durasjon
‚Ä¢ Kredittrating og markedsforhold
‚Ä¢ Gr√∏nne obligasjoner

**üßÆ Regneoppgaver**
11 praktiske oppgaver med steg-for-steg l√∏sninger:
‚Ä¢ Obligasjonsprising
‚Ä¢ YTM-beregninger
‚Ä¢ Durasjonsanalyse
‚Ä¢ Portef√∏lje-risiko
‚Ä¢ Rentef√∏lsomhet

**üí° Selvtest**
Rask gjennomgang av n√∏kkelbegreper og sammenhenger.

Start med flervalgsoppgavene for √• sjekke din generelle forst√•else, deretter g√• videre til regneoppgavene for √• √∏ve p√• beregninger.'
            )
        )
    )
FROM modules m 
WHERE m.order_index = 4;